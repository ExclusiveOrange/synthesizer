'test source

d = 5; 'duration
m = 0.5; 'magnitude
halftone = 2^(1/12);

'exponential decay
0,d;
line r2, 0, -4;
exp r1, r2;
mul r1, r1, m;

'some sines into r2
0,d;
sine r2, halftone * 440 - 440, 20, 0;
add r2, r2, 440;
mul r2, r2, (1/2) # (4/3);
sine r2, .5, r2, 0;

'some harsh into r3
base = 440/2^2;
dev = base/8;
sine r4, dev, 1/3, 0;
add r4, r4, base;
triangle r4, .7, r4, 0;
add r3, r3, r4;

'fade from sines into harsh
line r4, 1, 0;
line r5, 0, 1;
mul r2, r2, r4;
mul r3, r3, r5;
add r2, r2, r3;

'apply ADSR
mul r0, r1, r2;
